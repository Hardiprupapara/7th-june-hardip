var SvCtrlV2;(function(n){function t(n,t){for(var r=n&&n.length||0,i=0;i<r;i++)t(n[i])}function r(n,t){try{return n&&n.length&&n.indexOf(t)>-1}catch(i){return!1}}function u(n){try{return JSON.parse(n)}catch(t){return null}}function i(n,t){if(n)for(var i in n)t(i,n[i])}function f(n,t){var r=n;return i(t,function(n,t){r[n]=t}),r}function e(i){if(i&&i.target){var r=i.target.getBoundingClientRect(),u=r.x,f=r.right,e=r.y,o=r.bottom,s=n.elementsFromPoint((u+f)/2,(e+o)/2);t(s,function(n){n.tagName==="A"&&n.hasAttribute("h")&&_w.si_T&&_w.si_T(n.getAttribute("h"))})}}n.iterateThroughList=t;n.hasNonNegativeIndex=r;n.parseJsonString=u;n.iterateOverObject=i;n.objectAssign=f;n.fireOverlapping=e})(SvCtrlV2||(SvCtrlV2={})),function(n){function t(n,t){try{var i=_d.elementsFromPoint(n,t)||[];return Array.prototype.slice.call(i)}catch(r){return[]}}n.elementsFromPoint=t}(SvCtrlV2||(SvCtrlV2={})),function(n){function i(n){return n&&n.tagName==="A"}function t(n,t,i){n&&t&&i&&n.addEventListener(t,i)}function r(n,i){t(n,"keydown",function(n){n.keyCode==13&&i(n)})}function o(n,u,f,e){if(f===void 0&&(f=!0),e===void 0&&(e=!0),n&&u){var o=i(n)?u:function(n){e&&(sj_pd(n),n.stopImmediatePropagation());u(n)};t(n,"click",o);f&&r(n,o)}}function s(n,t){n&&t&&u(n,f,t)}function h(n,t){n&&t&&u(n,e,t)}function u(i,r,u){i&&u&&n.iterateThroughList(r,function(n){t(i,n,u)})}var f=["mouseenter","focusin"],e=["mouseleave","focusout"];n.isAnchorElement=i;n.addListenerToElement=t;n.addEnterKeyListener=r;n.addClickListener=o;n.addInListeners=s;n.addOutListeners=h}(SvCtrlV2||(SvCtrlV2={})),function(n){function r(n,i){if(n){var r=n[t];return r&&r.contains(i)}}function i(n,i,r){n&&n[t]&&n[t][r](i)}function u(n,t){i(n,t,"add")}function f(n,t){i(n,t,"remove")}var t="classList";n.elementHasClass=r;n.addElementClass=u;n.removeElementClass=f}(SvCtrlV2||(SvCtrlV2={})),function(n){function i(n,t){return t===void 0&&(t=!0),function(i,r){if(!r)return"";var u=n?n[r]:"";return t&&u.length&&(u=encodeURIComponent(u)),u}}function r(t,r){if(t&&r)return n.urlParamsTemplate.replace(/\{(\d)\}/g,i([t,r]))}function u(t){if(n.itemSchema||(n.itemSchema={}),t&&t.length>0){var i=t.split(":"),r=i[0],u=i[1];n.itemSchema[r]=u}}function f(t){var i;if(!t)return null;if(i=t.dataset,i){var r=i.svptnk,u=i.svptnerinfo,f=i.svitminfp,e=i.svcptid,o=i.ufmc,s=i.sfmc,h=i.svstb,c=i.svmdcmp,l=i.svloc,a=i.svattr,v=n.parseJsonString(u)||{};return n.objectAssign(n.parseJsonString(f)||{},{PredefinedType:v,Key:r,ComponentId:e,UnsavedFormCode:o,SavedFormCode:s,SavedLinkSameTab:!!h,MetaLocInfo:{MetadataLocationId:l,MetadataLocationAttr:a,MetaLocCompName:c}})}}function t(){if(n.singlePartner){var f=n.singlePartner.Mapping,e=n.singlePartner.SavedFormCode,o=n.singlePartner.SavedLinkSameTab,t=n.singlePartner.PredefinedType,s=t.Title,h=t.CollectionTagPath,c=t.CollectionId,i=t.PredefinedCollectionType,l=t.ItemType,a=t.APIItemType,v=n.singlePartner.Key,y=n.singlePartner.SourceAttr,p=n.singlePartner.ItemTagPath,w=n.singlePartner.AttachToElementSelector,b=n.singlePartner.AttachDelay,k=n.singlePartner.ComponentId;f&&n.iterateThroughList(f.split(","),u);l&&(n.defaultItemType=l);v&&(n.partnerKey=v);i&&(n.defaultCollectionType=i);s&&(n.defaultCollectionName=s);c?n.defaultCollectionId=c:n.defaultCollectionType&&(n.defaultCollectionId=Constants.PredefinedCollections[i]);h&&(n.defaultCollectionTagPath=h);p&&(n.itemTagPath=p);k&&(n.compName=k);y&&(n.sourceAttribute=y);a&&(n.apiItemType=a);w&&(n.attachElementSelector=w,b&&(n.attachDelay=b));e&&(n.savedFormCode=e);o&&(n.savedLinkSameTab=o);n.apiItemType&&n.compName&&(n.urlParams=r(n.apiItemType,n.compName))}}function e(i,r){var u=i&&i.getAttribute("data-svcptid"),e;u&&!n.componentMap[u]&&(e=f(i),n.componentMap[u]=e,n.partnerCount++,n.partnerCount===1&&(n.singlePartner=e,t()));r&&r(i)}n.componentMap={};n.partnerCount=0;n.urlParamsTemplate="type={0}&Comp={1}";n.initSinglePartnerInfo=t;n.registerTargetSelector=e}(SvCtrlV2||(SvCtrlV2={})),function(n){function h(n){gt=n}function c(){return gt}function ct(t){n.removeElementClass(n.currentHoveredElement,rt);n.currentElementMid=null;n.currentElementCollId&&(sj_evt.fire("onCurrentCollIdUnset",n.currentElementCollId),n.currentElementCollId=null);t?k(t):(n.currentHoveredElement=null,n.currentElementTurl=null,n.currentElementMetadata=null)}function ou(i){var r,u,f;if(y)for(r in n.localSavedItemsMap)if(u=n.localSavedItemsMap[r],u.rawItem&&(f=u.rawItem,t.cg(i,f)))return r;return null}function k(t,i,u,f){var c,l,h,a,v;i===void 0&&(i=n.sourceAttribute);u===void 0&&(u=n.urlParams);f===void 0&&(f=n.compName);n.addElementClass(t,rt);n.currentHoveredElement=t;h=o(t,i)||o(t,e);h&&(n.currentElementMetadata=h,n.currentElementMid=s(h)||ou(h),n.currentElementTurl=h.turl,n.currentElementTurl||(a=(l=(c=h.ThumbnailInfo)===null||c===void 0?void 0:c[0])===null||l===void 0?void 0:l.Thumbnail,a&&(n.currentElementTurl=a)),v={},n.currentElementMid&&((n.localSavedItemsMap===null||n.localSavedItemsMap===void 0?void 0:n.localSavedItemsMap[n.currentElementMid])?(n.currentElementCollId=n.localSavedItemsMap[n.currentElementMid].lastCollection,n.currentElementCollId&&sj_evt.fire("onCurrentCollIdSet",n.currentElementCollId),v=n.localSavedItemsMap[n.currentElementMid].collections,n.addElementClass(t,r),n.addElementClass(n.hoverContainerSub,r)):n.removeElementClass(n.hoverContainerSub,r),sj_evt.fire("onHoverElementSet",v)));n.currentUrlParams=u;n.currentCompName=f}function lt(t){var i,r;return t?(i=n.defaultItemType in ai?ai[n.defaultItemType]:null,!i)?t:(r=n.defaultItemType+":"+i+"=",(t.indexOf(r)!==0?r:"")+t):null}function ki(n,t){return n?_qs("["+t+"]",n):null}function o(t,i){var r,u;return(i===void 0&&(i=n.sourceAttribute),!t)?null:(r=t.hasAttribute(i)?t:ki(t,i),!r)?null:(u=r.getAttribute(i),!u)?null:n.parseJsonString(u)}function l(t){var i=ki(n.containerElement,n.sourceAttribute+'*="'+t+'"');if(!i)return null;while(!u(i)&&i[si])i=i[si];return u(i)?i:null}function u(t){return t&&n.elementHasClass(t,ti)}function a(t,i,u,f,e){if(t&&i){var o=n.localSavedItemsMap[i];o&&(n.addElementClass(t,r),u&&vt(t,"Saved",o[ut],i,f,e))}}function at(t,i,u,f){t&&i&&(i in n.localSavedItemsMap||(n.removeElementClass(t,r),u&&vt(t,"Unsaved",ht,i,f)))}function vt(t,i,r,u,f,e){t&&sj_evt.fire(i,t);var o={ColId:r,ItmId:u,CompName:n.currentCompName,ClkSrc:f};e!==null&&e!==undefined&&(o.IsNewCol=e?"1":"0");MMInstUtils.logEvent("CI.SaveClick","SaveControl",i,o,MMInstUtils.getInstKData(t))}function di(t,i,r,u,f,e){var o;(e===void 0&&(e=!1),t)&&(t in n.localSavedItemsMap?(u&&n.localSavedItemsMap[t].lastCollection||(n.localSavedItemsMap[t].lastCollection=r),n.localSavedItemsMap[t].collections[r]||(n.localSavedItemsMap[t].collections[r]=!0,n.localSavedItemsMap[t].numCollections++),u?n.localSavedItemsMap[t].collectionQueue.unshift(r):n.localSavedItemsMap[t].collectionQueue.push(r)):(n.localSavedItemsMap[t]={cid:e?i:lt(i),collections:(o={},o[r]=!0,o),lastCollection:r,collectionQueue:[r],isDefault:!e&&n.localCollectionsMap[r]===n.defaultCollectionName,numCollections:1},u&&f&&(n.localSavedItemsMap[t].rawItem=f)))}function gi(t,i){if(t&&n.localSavedItemsMap[t])if(ht=i,n.localSavedItemsMap[t].numCollections===1)delete n.localSavedItemsMap[t],n.currentElementMid===t&&(n.currentElementCollId=null);else{delete n.localSavedItemsMap[t].collections[i];n.localSavedItemsMap[t].numCollections--;var r=n.localSavedItemsMap[t].collectionQueue.indexOf(i);r>-1&&(n.localSavedItemsMap[t].collectionQueue.splice(r,1),n.localSavedItemsMap[t].lastCollection=n.localSavedItemsMap[t].collectionQueue.slice(-1)[0],n.currentElementMid===t&&(n.currentElementCollId=n.localSavedItemsMap[t].lastCollection))}}function yt(t,i,r){t&&(n.addElementClass(t,r),n.removeElementClass(t,i))}function nr(n){n&&yt(n,w,it)}function su(n){n&&yt(n,it,w)}function hu(n,t){n&&u(n)&&(nr(n),sj_evt.fire("onSaveControlError",t?1:2))}function pt(t){t&&n.removeElementClass(t,w)}function cu(){if(n.currentElementTemp){var t=n.currentElementTemp;return n.currentElementTemp=null,t}}function tr(n){var u,f,s,t,e,i,r,o;if(n&&n.items){for(s=n.items,t=0,e=s;t<e.length;t++)if(i=e[t],i&&i.content){if(r=i.content,!r)continue;if(o=r.thumbnailUrl||((f=(u=r.thumbnails)===null||u===void 0?void 0:u[0])===null||f===void 0?void 0:f.thumbnailUrl),o)return o}return null}}function ir(t,i,r,u){n.localCollectionsCidMap[t]||(n.localCollectionsCidMap[t]=[]);n.localCollectionsCidMap[t].indexOf(i)<=-1&&(u?n.localCollectionsCidMap[t].push(i):n.localCollectionsCidMap[t].unshift(i));n.cidToThumbnailUrlMap[i]||(n.cidToThumbnailUrlMap[i]=r)}function lu(t,i){var r,u;if(n.localCollectionsCidMap[t])return(u=n.localCollectionsCidMap[t].indexOf(i),u<=-1)?void 0:(n.localCollectionsCidMap[t].splice(u,1),((r=n.localCollectionsCidMap[t])===null||r===void 0?void 0:r[0])||null)}function wt(t,i,r,f,e,o,s,h){var p=r.targetCollectionOperationStatus,c,w,b,nt;if(!(p&&p[ft]))return!1;try{var k=p,d=k.itemOperationStatuses,tt=ut,y=k[tt];if(!(d&&y&&y.id))return!1;var it=d,g=it[0],rt=ft,et=g[rt],ot=oi,v=g.item[ot];return et?(c=s in Constants.PredefinedCollections?s:y.id,n.latestCollId=c,s in Constants.PredefinedCollections&&(n.kctColls[s]=y.id),t||n.currentElementMid!==null||v===null||(w=v.substring(v.indexOf(":")+1),t=w,n.currentElementMid=w),!t&&n.currentElementMid&&(t=n.currentElementMid),b=f?v:lt(v),ir(c,b,n.currentElementTurl,!1),n.localCollectionsMap[c]&&sj_evt.fire("onChangeCollThumbnail",c,n.currentElementTurl),nt=t?n.localSavedItemsMap[t]:!1,di(t,b,c,!1,null,f),i)?(a(i,t,!0,e,h),sj_evt.fire(st,c,n.localCollectionsMap[c],t&&n.localSavedItemsMap[t].numCollections||1),u(i)||a(l(t),t,!1),rr("onSaveAdd",r,t,i,!nt)):!1:void 0}catch(ht){return!1}}function au(t,i,r,f,e,o){var h,s;return(r&&r[ft])?(gi(t,o),i)?(at(i,t,!0,f),h=lu(o,e),sj_evt.fire("onChangeCollThumbnail",o,h?n.cidToThumbnailUrlMap[h]:null),s=!n.localSavedItemsMap[t],s&&!u(i)&&at(l(t),t,!1),sj_evt.fire(st,o,n.localCollectionsMap[o],s?0:n.localSavedItemsMap[t].numCollections),rr("onSaveDel",r,t,i,s)):!1:!1}function rr(t,i,u,f,e){if(f){if(pt(f),n.currentHoveredElement===f){n.removeElementClass(n.ctrl,ri);switch(t){case"onSaveAdd":n.addElementClass(n.hoverContainerSub,r);break;case"onSaveDel":e&&n.removeElementClass(n.hoverContainerSub,r)}pt(n.hoverContainerSub)}sj_evt.fire(t,i,u,f,e,n.metaLocElement&&n.metaLocElement===f)}return ht=null,!0}function s(n){if(n){var t=n.mid,i=n.sid;return t||i}}function bt(t,i){return i===void 0&&(i=n.defaultItemType),!("mid"in t)&&i!=="recipe"}function ur(r,u,h,c){var a,l,p;if(u===void 0&&(u=n.currentHoveredElement),c===void 0&&(c=n.sourceAttribute),a=u||n.currentHoveredElement,a){var w=r in Constants.PredefinedCollections,b=w?Constants.PredefinedCollections[r]:null,k=n.localCollectionsMap[r],v=function(t,i,u){return u===void 0&&(u=null),r&&(n.latestCollId=r),sj_evt.fire("onCurrentCollIdSet",r),wt(u,a,t,i,h,k,r,!1)},y=n.currentUrlParams;if(a.hasAttribute(e))t.agai(y,n.parseJsonString(a.getAttribute(e)),r,function(t){return v(t,!0,n.currentElementMid)},function(){return i(!0)});else{if(l=o(a,c),!l){i(!0);return}p=s(l);bt(l)&&typeof t.ag!==f?t.ag(y,l,n.itemSchema,n.itemTagPath,n.localCollectionsMap[r],n.partnerKey,function(n){return v(n,!0,p)},function(){return i(!0)}):w&&typeof t.ai!==f?t.ai(y,l,n.defaultItemType,n.itemSchema,b,function(n){return v(n,!1,p)},function(){return i(!0)}):typeof t.aic!==f&&t.aic(y,l,n.defaultItemType,n.itemSchema,r,function(n){return v(n,!1,p)},function(){return i(!0)})}}}function vu(r,u,h,c,l){var v=u||n.currentHoveredElement,y,p,a,w;if(v)if(y=function(t,i,u){var e,o,f;return(u===void 0&&(u=null),f=(o=(e=t.targetCollectionOperationStatus)===null||e===void 0?void 0:e.collection)===null||o===void 0?void 0:o.id,f)?(d(f,r),n.latestCollId=f,sj_evt.fire(ot,!0,f,r,n.currentElementTurl,null,!0),h&&h(t),wt(u,v,t,i,"Flyt",r,f,!0)):!1},p=n.currentUrlParams,v.hasAttribute(e))t.agnai(p,n.parseJsonString(v.getAttribute(e)),r,function(n){return y(n,!0)},function(){return i(!0)});else{if(a=o(v,l),w=function(){i(!0);c()},!a){w();return}bt(a)&&typeof t.ag!==f?t.ag(p,a,n.itemSchema,n.itemTagPath,r,n.partnerKey,function(n){return y(n,!0,s(a))},w):r&&typeof t.anc!==f&&t.anc(p,a,n.defaultItemType,n.itemSchema,r,function(n){return y(n,!1,s(a))},w)}}function fr(r,u,o){var l=o||n.currentHoveredElement,a,s,h,c;l&&(a=n.currentElementMid,s=n.localSavedItemsMap[a],s)&&(h=function(t){return n.latestCollId=r,sj_evt.fire("onCurrentCollIdUnset",r),au(a,l,t,u,s.cid||null,r)},c=n.currentUrlParams,l.hasAttribute(e)?t.dgai(c,n.parseJsonString(l.getAttribute(e)),s.cid,n.kctColls[r]||r,h,function(){return i(!0)}):bt(n.currentElementMetadata)&&typeof t.dg!==f?t.dg(c,n.currentElementMetadata,n.itemSchema,n.itemTagPath,r,n.partnerKey,h,i):r in Constants.PredefinedCollections&&typeof t.ddc!==f?t.ddc(c,Constants.PredefinedCollections[r],s.cid,n.defaultItemType,h,function(){return i(!1)}):typeof t.dic!==f&&t.dic(c,r,s.cid,n.defaultItemType,h,i))}function i(t){n.currentHoveredElement&&hu(n.currentHoveredElement,t)}function yu(){MMInstUtils.logEvent("CI.Saves","SaveControl","NoCollections");n.addElementClass(n.ctrl,ri)}function pu(n){if(!(n&&n.content&&n.itemType))return null;var t=n.content,i=n.itemType;switch(i){case"Image":return t.imageId;case"Video":return t.videoId;case"Generic":return t.contentId;default:return null}}function wu(t){if(!t)return null;var u=t&&t[oi],i=u?decodeURIComponent(u):"",r=pu(t);return r||(r=/^[a-z]+:[a-z]+=/.test(i)?i.substring(i.indexOf("=")+1):i.replace("/"+n.partnerKey+"/:","")),{contentId:r,collectionItemId:i}}function d(t,i){n.localCollectionsMap[t]=i;n.localCollectionNames[i]=1}function bu(t){var i,e;if(t){var u=t.collectionPage,f=t.id,r=t.knownCollectionType;(r&&(n.kctColls[Constants.PredefinedCollections[r]]=f),i=!r?f:Constants.PredefinedCollections[r],n.latestCollId||(n.latestCollId=i),n.localCollectionsMap[i]||af(t),u&&u.items)&&(e=u.items,n.iterateThroughList(e,function(t){var u,e;if(t){var o=wu(t),f=o.collectionItemId,r=o.contentId;r&&f&&(((u=t.content)===null||u===void 0?void 0:u.thumbnailUrl)&&ir(i,f,t.content.thumbnailUrl,!0),di(r,f,i,!0,t,t.itemType&&t.itemType.toLowerCase()==="generic"),e=l(r),e)&&(a(e,r),sj_evt.fire(st,i,n.localCollectionsMap[i],n.localSavedItemsMap[r].numCollections))}}))}}function ku(t){var i,u,r;if(!(t&&t.collections))return!1;if(i=t.collections,u=(i===null||i===void 0?void 0:i.length)||0,n.iterateThroughList(i,bu),sj_evt.fire("onSaveGet",t),y||(y=!0,p&&(k(p),p=null)),(!!(n.ctrl===null||n.ctrl===void 0?void 0:n.ctrl.dataset.svkct)||n.standalone)&&n.singlePartner){var f=n.singlePartner.PredefinedType,o=f.Title,s=f.CollectionId,e=f.PredefinedCollectionType;n.localCollectionsMap[s]||(r=Constants.PredefinedCollections[e],n.localCollectionsMap[r]||(d(r,o),n.latestCollId||(n.latestCollId=r),sj_evt.fire(ot,!1,r,n.defaultCollectionName,null,e),u++))}return!bi&&n.singlePartner&&(sj_evt.fire(li,n.singlePartner),bi=!0),sj_evt.fire("onCollectionsGotten",u),!0}function du(t,i){n.hoverContainer&&n.hoverContainer.style.setProperty(t,i)}function er(t){n.hoverContainerSub&&n.removeElementClass(n.hoverContainerSub,t)}function or(t){n.hoverContainer&&t&&n.iterateOverObject(t,du)}function sr(t){n.hoverContainer&&or({display:t})}function kt(t){var r=t||n.currentHoveredElement,i;if(n.hoverContainer&&r){if(h(!0),vf(),i=dt(r),!i){h(!1);return}var u=i.top,f=i.bottom,e=i.left,o=i.width,s=i.height,c=f>_w.innerHeight?_w.innerHeight-u:s;or({width:o+b,height:c+b,top:u+wi+b,left:e+pi+b});h(!1)}}function hr(){n.hoverContainer&&sr("block")}function cr(){n.hoverContainer&&(sr("none"),sj_evt.fire("onHoverContainerHide"))}function gu(t){var i=n.currentHoveredElement;i&&n.hoverContainerSub&&(n.elementHasClass(i,t)?n.addElementClass(n.hoverContainerSub,t):er(t))}function nf(){if(!c()){var t=ar(null);t&&(ct(t),n.hoverContainer&&(kt(),hr(),n.removeElementClass(n.hoverContainerSub,"b_scpers"),n.iterateThroughList(vi,gu)),sj_evt.fire("onControlAppended"))}}function tf(t,i,u){var f=u||n.currentHoveredElement;f&&(sj_evt.fire("onSaveInProgress",f),n.elementHasClass(f,r)||n.elementHasClass(n.hoverContainerSub,r)?fr(t,i):ur(t,f,i))}function v(n,t){if(!(n&&t))return!1;try{return n.contains(t)}catch(i){return!1}}function dt(n){if(!n)return null;try{return n.getBoundingClientRect()}catch(t){return null}}function lr(t,i){var r;if(!(t&&i))return!1;try{if(r=dt(t),!r)return;var u=r.x,f=r.y,e=n.elementsFromPoint(u,f);return n.hasNonNegativeIndex(e,i)}catch(o){return!1}}function rf(t){if(!c()){var i=t[et];if(i&&n.hoverContainer){if(v(n.ctrl,i))return;lr(i,n.hoverContainer)||cr()}}}function ar(n){tt&&sb_ct(tt);var t=yi;return yi=n,n&&(tt=sb_st(nf,eu*2)),t}function uf(t){var i,r;if(!c())if(i=t[hi],i&&u(i)){if(r=t[et],n.hoverContainerSub&&r&&v(r,n.hoverContainerSub))return;ar(i);sj_evt.fire("onSaveFocus")}else sj_pd(t)}function ff(t){var i,r;if(!c()&&(i=t[et],i)&&!v(n.ctrl,i)&&(r=t[hi],u(r))){if(n.hoverContainer){if(v(i,n.hoverContainer))return;cr()}n.iterateThroughList(vi,er);n.iterateThroughList([fi,ui,ei,rt],function(t){n.removeElementClass(r,t)});n.currentHoveredElement===r&&ct()}}function vr(t){t&&(n.addInListeners(t,uf),n.addOutListeners(t,ff),u(t)&&br(t))}function yr(n,t,i){return(i===void 0&&(i=""),n&&n.children&&t)?n.querySelectorAll("."+t+i):[]}function pr(n){return n?yr(n,ti):[]}function wr(t){t&&(u(t)?vr(t):n.iterateThroughList(pr(t),vr))}function br(n){if(n){var t=o(n);t&&a(n,s(t))}}function ef(t){var i=t.addedNodes,r=t.target;r&&n.iterateThroughList(pr(r),br);n.ctrl&&i&&i.length>0&&n.iterateThroughList(i,wr)}function of(i){n.partnerCount===1&&(n.containerElement=i,t.gc(n.urlParams,ku,yu));nt.observe(i,ni);n.ctrl&&wr(i)}function sf(t){for(var i=t,u={scroll:1,overlay:1},r;i&&i.parentElement&&i!==_d.body;){if(i.hasAttribute(ci))break;r=_w.getComputedStyle(i);(r.overflow in u||r.overflowX in u||r.overflowY in u)&&(n.addListenerToElement(i,"scroll",hf),i.setAttribute(ci,"1"));i=i.parentElement}}function hf(n){sj_sp(n);_w.dispatchEvent(new Event("scroll"))}function kr(t){n.registerTargetSelector(t,of);sf(t)}function dr(t){var r,i,u,f;if(t&&(n.elementHasClass(t,ii)&&t.dataset.svcptid&&kr(t),r=t.children,r))for(i=0,u=r;i<u.length;i++)f=u[i],dr(f)}function cf(t){var i=t.addedNodes,u=t.attributeName,r=t.target;(i||u||r)&&(i&&n.iterateThroughList(i,dr),u&&r&&n.elementHasClass(r,"psvctrl")&&n.singlePartner&&sj_evt.fire(li,n.singlePartner))}function lf(t){t&&n.iterateThroughList(t,kr)}function gr(t){return new MutationObserver(function(i){return n.iterateThroughList(i,t)})}function nu(n){var t=n[1],i=n[2],u,r;t&&i&&(u=i&&lt(i),u)&&(r=l(t),r&&a(r,t,!1))}function tu(n){var t=n[1],r=n[2],i;t&&(i=l(t),gi(t,r),i&&at(i,t,!1))}function af(t,i){var f,r;i===void 0&&(i=!1);var h=t.id,e=t.title,o=t.collectionPage,s=t.knownCollectionType,u=s?Constants.PredefinedCollections[s]:h;!n.localCollectionsMap[u]&&e&&(d(u,e),r=null,o&&((f=o.items)===null||f===void 0?void 0:f.length)&&(r=tr(o),r&&sj_evt.fire("onChangeCollThumbnail",u,r)),sj_evt.fire(ot,i,u,e,r,s||null))}function vf(){pi=_w.scrollX||_w.pageXOffset;wi=_w.scrollY||_w.pageYOffset}function iu(){sj_evt.unbind("onFavAdd",nu);sj_evt.unbind("onFavDel",tu);sj_evt.unbind("ajax.unload",iu);sj_evt.unbind("onPersButtonInteract",ru);_d.body.removeChild(n.hoverContainer);g.disconnect();nt.disconnect()}function ru(t){var i=t[1],r=t[2],u=t[3],f=t[4],e=t[5];k(r,u,f,e);kt(i);hr();n.addElementClass(n.hoverContainerSub,"b_scpers");sj_evt.fire("onControlAppended")}function yf(){n.ctrl=_ge("svctrl");n.ctrl&&(h(!1),n.addListenerToElement(n.ctrl,"mousedown",sj_sp));n.ctrlBtn=_ge("svctrlbtn");n.hoverContainer=_ge("svhvr");n.hoverContainerSub=_ge("svhvrsub");n.hoverContainer&&(_d.body.appendChild(n.hoverContainer),n.iterateThroughList(uu,function(t){n.addListenerToElement(_w,t,function(){return kt()})}),n.addOutListeners(n.hoverContainer,rf));n.localSavedItemsMap={};n.localCollectionsMap={};n.localCollectionsCidMap={};n.cidToThumbnailUrlMap={};n.localCollectionNames={};n.latestCollId=null;n.currentElementCollId=null;n.currentElementMid=null;n.partners=[];nt=gr(ef);g=gr(cf);g.observe(_d.body,ni);lf(yr(_d.body,ii));n.iterateOverObject(fu,sj_evt.bind);sj_evt.bind("onPersButtonInteract",ru);sj_evt.bind("ajax.unload",iu);sj_evt.bind("onCurrentElementSet",function(n){var t=n[1];y?k(t):p=t},!0)}var t=MySavesAPIUtils,gt,y=!1,p=null,g,nt,ni={childList:!0,subtree:!0,attributes:!0},tt,ti="isv",r="saved",ii="isvctrl",it="err",w="ing",ri="b_geterr",ui="isvfoc",fi="b_isvhvr",ei="b_schvr",rt="b_isvcur",ut="collection",oi=ut+"ItemId",ft="isSuccess",si="parentElement",f="undefined",et="relatedTarget",hi="currentTarget",b="px",e="data-saves-generic-item",ci="data-scrbind",ot="onCollRegister",li="onPartnerRegister",st="onUpdateHoverBox",ai={webdoc:"url",recipe:"sid",video:"mid",image:"cid",product:"cid"},vi=[r,ui,fi,w,it,ei],uu=["scroll","resize"],fu={onFavAdd:nu,onFavDel:tu};n.containerElement=null;var ht,yi,eu=0,pi=0,wi=0,bi=!1;n.kctColls={};n.setKeepFlyoutActive=h;n.getKeepFlyoutActive=c;n.clearCurrentHoveredElement=ct;n.metadataFromElement=o;n.logButtonClick=vt;n.switchElementClass=yt;n.switchElementToErrorClass=nr;n.switchElementToInProgressClass=su;n.removeInProgress=pt;n.clearTempCurrentElement=cu;n.getThumbnailUrlFromCollectionPage=tr;n.handleAddStateChange=wt;n.getMetadataId=s;n.addToCollection=ur;n.addToNewCollection=vu;n.removeFromCollection=fr;n.addCollectionName=d;n.handleSaveClick=tf;n.elementContains=v;n.getClientRect=dt;n.isElementInSpaceOfAnother=lr;yf()}(SvCtrlV2||(SvCtrlV2={})),function(n){function hi(t){if(i){t||(t=n.currentElementMid);var r=t&&n.localSavedItemsMap[t],u=r?r.lastCollection:n.latestCollId,f=u&&n.localCollectionsMap[u]||n.defaultCollectionName;dt(u,f,r?r.numCollections:0)}}function ci(t,i){if(t&&at!==t){n.removeElementClass(at,"b_sclbl");n.addElementClass(t,"b_sclbl");at=t;n.removeElementClass(ri,nt);var r=t.querySelector(i?"onsvd":"onusvd");n.addElementClass(r,nt);ri=r}}function li(t){sj_sp(t);var i=t.target.value,r=n.localCollectionNames[i];yt.setAttribute("aria-disabled",i&&!r?"false":"true");ot.setAttribute("aria-disabled",i&&!r?"false":"true");r?n.addElementClass(l,tt):n.elementHasClass(l,tt)&&n.removeElementClass(l,tt)}function ai(t){var i,r=t[1];dt(r,n.localCollectionsMap[r],n.currentElementMid&&((i=n.localSavedItemsMap[n.currentElementMid])===null||i===void 0?void 0:i.numCollections))}function ir(n){var t=n[1];vt&&(ti.textContent=vt[t]);u(y)}function rr(t){var f=t[0],r=t[1],u=t[2],i=t[3];i===0?n.removeElementClass(n.hoverContainerSub,rt):n.addElementClass(n.hoverContainerSub,rt);dt(r,u,i)}function ur(){var o,s,p;n.ctrl&&(o=n.ctrl.dataset,o&&(s=o.dly,p=o.sfmc,s&&(k=parseInt(s,10)),n.savedFormCode||(n.savedFormCode=p)));h=_ge("svctrlnewbtn");c=_ge("svctrlinlineform");st=_ge("svctrlnewint");ot=_ge("svctrlinlineformcreate");a=_ge("svctrlhvr");t=_ge("svflytc");i=_ge("svctrllnk");ii=i.getAttribute("href");lt=_ge("svctrlhvrnum");y=_ge("svctrlerr");ti=_ge("svctrlerrtxt");f=_ge("svctrlhvrbtn");ht=_ge("svctrllstw");ct=_ge("svctrlhvrpnl");yt=_ge("svctrlnewformcreate");d=_ge("svctrlnewform");h&&(e=_ge("svctrlnewformname"),n.addClickListener(_ge("svctrlnewstart"),b),n.addClickListener(_ge("svctrlnewformback"),function(){return u(ui)}),n.addClickListener(h,b),n.addClickListener(yt,ft),e&&(n.addEnterKeyListener(e,ft),n.addListenerToElement(e,"keyup",li)));c&&(r=_ge("svctrlinlineformname"),n.addClickListener(_ge("svctrlinlineformback"),kt),n.addClickListener(ot,ft),r&&(n.addEnterKeyListener(r,ft),n.addListenerToElement(r,"keyup",li)));i&&n.isAnchorElement(i)&&n.addClickListener(i,pr);t&&(t.hasAttribute("data-svlne")&&(n.standalone=!!t.getAttribute("data-svlne")),n.standalone||n.addOutListeners(t,cr),t.hasAttribute("data-inline-crtcoll")&&(w=!!t.getAttribute("data-inline-crtcoll")),n.addInListeners(n.ctrlBtn,ar),n.addOutListeners(n.ctrlBtn,vr),a&&(w?(n.addClickListener(f,pi),n.addClickListener(_ge("svctrlhvrstart"),pi)):(n.addClickListener(f,b),n.addClickListener(_ge("svctrlhvrstart"),b))),n.addClickListener(_ge("svctrltri"),yr,!1),t.hasAttribute(oi)&&(vt=n.parseJsonString(t.getAttribute(oi))));l=w?_ge("svctrlinlineformerrdup"):_ge("svctrlnewformerrdup");sj_evt.bind("onControlAppended",wr);sj_evt.bind("onSaveInProgress",sr);sj_evt.bind("onSaveAdd",er);sj_evt.bind("onSaveDel",or);sj_evt.bind("onSaveFocus",hr);sj_evt.bind("onHoverContainerHide",gt);sj_evt.bind("onCurrentCollIdSet",ai);sj_evt.bind("onUpdateHoverBox",rr);sj_evt.bind("onSaveButtonClick",v);n.standalone||sj_evt.bind("onCollListExpand",ki);sj_evt.bind("onSaveControlError",ir);n.standalone&&(sj_evt.bind(ei,fr),sj_evt.bind(tr,gi))}function b(){n.clearTempCurrentElement();u(d);e.disabled=!1}function fr(t){var i=t[0],r=t[1];i==ei&&s!==y&&(r>0?(ai([null,n.latestCollId]),u(a)):u(h),di())}function vi(t){var i;hi(t);v();wi((i=n.localSavedItemsMap[t])===null||i===void 0?void 0:i.numCollections)}function er(t){var i=t[3];n.currentHoveredElement===i&&(vi(n.currentElementMid),n.addElementClass(n.hoverContainerSub,rt))}function or(t){var i=t[3],r=t[4];n.currentHoveredElement===i&&(vi(n.currentElementMid),r&&n.removeElementClass(n.hoverContainerSub,rt))}function yi(){n.removeElementClass(y.querySelector("."+nt),nt)}function sr(t){var i=t[1],r=t[2];n.standalone||(yi(),n.currentHoveredElement===i&&ci(_ge("svctrlhvrpnling"),r))}function hr(){t&&!k&&v()}function kt(){f&&c&&(n.removeElementClass(ct,ut),n.removeElementClass(ht,ut),n.removeElementClass(c,o),n.addElementClass(f,o),n.setKeepFlyoutActive(!1),r.value="",r.disabled=!0)}function pi(){(n.clearTempCurrentElement(),f&&c)&&(n.addElementClass(ct,ut),n.addElementClass(ht,ut),n.addElementClass(c,o),n.removeElementClass(f,o),n.setKeepFlyoutActive(!0),r.value="",r.disabled=!1,r.focus(),n.removeElementClass(l,tt))}function wi(n){if(lt&&n!==undefined&&n!==null){var t=n-1;lt.textContent=t>0?"+"+t:""}}function dt(t,r,u){(i.textContent=r,n.isAnchorElement(i))&&(i.setAttribute("href",ii+"&FORM="+n.savedFormCode+"&collId="+t),n.savedLinkSameTab&&i.hasAttribute(it)?i.removeAttribute(it):i.setAttribute(it,"_blank"),wi(u))}function ft(){var t;(w?(t=r.value,r.disabled=!0):(t=e.value,e.disabled=!0),t)&&(n.localCollectionNames[t]||(n.currentElementTemp=n.currentHoveredElement,u(st),n.addToNewCollection(t,n.currentElementTemp,null,w?kt:b)))}function cr(i){if(!n.getKeepFlyoutActive()){var r=i.relatedTarget;if(r){if(n.isElementInSpaceOfAnother(t,r))return;if(n.elementContains(n.ctrl,r))return;if(n.isElementInSpaceOfAnother(n.ctrl,r))return}gt();n.clearCurrentHoveredElement()}}function bi(){p&&(sb_ct(p),p=null)}function ki(){var r,i,s;if(t&&(n.removeElementClass(n.ctrl,pt),t.style.removeProperty("left"),t.style.removeProperty("right"),n.removeElementClass(n.ctrl,wt),n.removeElementClass(n.ctrl,fi),r=n.getClientRect(t),r)){var u=Math.min(n.getClientRect(_d.body).width,_w.innerWidth),o=r.width,f=r.right,e=r.left;e<0?f+o>u?(n.addElementClass(n.ctrl,pt),i=(f-u)/2,e+i<=0&&(i-=si),t.style.right=i+"px"):n.addElementClass(n.ctrl,wt):f>u&&(e<o?(n.addElementClass(n.ctrl,pt),i=e/2,f-i>=u&&(i+=si),t.style.left=-1*i+"px"):n.addElementClass(n.ctrl,wt));s=Math.min(n.getClientRect(_d.body).height,_w.innerHeight)-r.bottom;s<t.clientHeight&&n.addElementClass(n.ctrl,fi)}}function lr(){n.latestCollId?(u(a),ci(_ge("svctrlhvrpnltxt"),!0)):u(h)}function di(){t&&(n.addElementClass(n.ctrl,g),yi(),n.standalone||ki(),ni&&n.standalone||(MMInstUtils.logEvent("CI.Hover","SaveControl","ShowFlyout",null,MMInstUtils.getInstKData(n.currentHoveredElement)),ni=!0),sj_evt.fire("onResetScroll"),et=!0,bi())}function gt(){t&&(n.removeElementClass(n.ctrl,g),u(),bi(),et=!1)}function v(){lr();et||di()}function ar(i){i.relatedTarget&&(n.getKeepFlyoutActive()||(sj_pd(i),sj_sp(i),n.addElementClass(n.ctrl,g),n.hoverContainerSub&&n.addElementClass(n.hoverContainerSub,"b_schvr"),sj_evt.fire("onSaveHover"),t&&(k&&!p?p=sb_st(v,k):v())))}function vr(t){if(!n.getKeepFlyoutActive()){var i=t.relatedTarget;if(i){if(n.elementContains(n.ctrl,i))return;if(n.isElementInSpaceOfAnother(n.hoverContainer,i))return}n.clearCurrentHoveredElement();t.type==="mouseleave"&&(n.removeElementClass(n.ctrl,g),gt())}}function yr(t){var i=n.elementsFromPoint(t.clientX,t.clientY);i&&i.length>1&&i[1].click()}function pr(t){var i=t[it];n.logButtonClick(n.currentHoveredElement,"LnkClk",n.currentElementCollId,n.currentElementMid,nr);si_ct(i,!1,t);n.standalone&&sj_evt.fire("onNewTabOpenRequest",i.getAttribute("href"));sj_sp(t)}function u(t){var u,i,r,e;if(s&&(n.removeElementClass(s,o),t===d&&(ui=s),u=t==d||t==st,n.setKeepFlyoutActive(u),n.getKeepFlyoutActive()?n.addElementClass(n.ctrl,"b_scnapd"):n.removeElementClass(n.ctrl,"b_scnapd")),!t){s=null;sj_evt.fire(bt,1);return}n.addElementClass(t,o);t==a&&(n.addElementClass(f,o),kt());s=t;i=null;switch(t){case a:r=_ge("svctrlpckr");r?(e=r.getAttribute("aria-expanded")==="false",i=e?3:4):i=3;break;case y:i=5;break;case h:i=3}sj_evt.fire(bt,i)}function wr(){i&&(n.currentElementMid&&hi(n.currentElementMid),sj_evt.fire(bt,2))}function gi(t,i){v();var r=n.localSavedItemsMap[t||n.currentElementMid];r&&r.numCollections>1?sj_evt.fire("onBtnToggleCollList"):n.handleSaveClick(n.currentElementCollId||n.latestCollId,"Btn",i||n.currentHoveredElement)}var ni=!1,et=!1,s,h,f,c,r,ot,st,y,ti,l,ht,ct,t,a,i,ii,lt,at,ri,k=0,p,vt,d,e,ui,w=!1,yt,pt="b_nrrwimg",wt="b_nrrwimgr",fi="b_nrrwimgb",g="b_flyt",o="b_scactive",nt="b_scslbl",tt="b_scdisp",it="target",nr="Flyt",rt="saved",ut="scdactve",bt="onVisualStateChanged",ei="onCollectionsGotten",tr="onHostSavesControlClicked",oi="data-save-error-map",si=5;n.onSaveControlClicked=gi;ur()}(SvCtrlV2||(SvCtrlV2={})),function(n){function w(){a.scrollTop=0}function tt(t){var i=t.currentTarget,u=i.getAttribute(r),e=i.getAttribute(s),f=n.currentHoveredElement;if(u||e)sj_sp(t),sj_pd(t),t.stopImmediatePropagation();else return!0;i.hasAttribute(h)?n.removeFromCollection(u,y,f):n.addToCollection(u,f,y)}function b(n){var t=n;if(/\/th(\/.*|)\?/i.test(n)){var i=n.split("?"),r=i[0],u=i[1];t=r+"?"+u.replace(/&?\b[whrc]=\d+/gi,"")+g}return t}function it(n){var f=n[1],u=n[2],i=_qs("["+r+'="'+f+'"] img',t);i&&(u?i.src=b(u):i.removeAttribute("src"))}function u(t,i,r){r===void 0&&(r=!1);var u=r?function(n){t.insertBefore(n,t.firstChild)}:function(n){t.appendChild(n)};n.iterateThroughList(i,u)}function f(t,i){var r=function(n,i){i&&t.setAttribute(n,i)};n.iterateOverObject(i,r)}function e(n,t){return sj_ce(n,null,t)}function rt(i){var c,w=i[1],k=i[2],d=i[3],p=i[4],g=i[5],nt=i[6],a,o,v,y,h;t&&(a=e("div","b_svcimg"),o=sj_ce("img"),f(o,{role:"presentation"}),sj_be(o,"error",function(){o.removeAttribute("src")}),p&&(o.src=b(p)),u(a,[o]),v=e("div","b_svclnk"),y=e("p","b_ignbt"),y.textContent=d,u(v,[y]),h=e("li","b_svcitm"),f(h,(c={},c[r]=k||null,c[s]=g||null,c)),nt&&l(h),u(h,[a,v]),u(t,[h],w),n.addClickListener(h,tt,!0,!1))}function c(t){var i,r;w();i=!1;t===null||t===undefined?(r=o.getAttribute("aria-expanded"),r!=="false"||v||(MMInstUtils.logEvent("CI.SaveClick","SaveControl","ColExp",null,MMInstUtils.getInstKData(n.currentHoveredElement)),v=!0),i=r==="true"?!1:!0):i=t;f(o,{"aria-expanded":i?"true":"false"});i&&sj_evt.fire(p);n.standalone&&sj_evt.fire(nt,i?4:3)}function k(i){return n.defaultCollectionId&&n.defaultCollectionId===i?_qs("["+s+"]",t):_qs("["+r+"='"+i+"']",t)}function l(n){var t;f(n,(t={},t[h]="1",t))}function d(n){n.removeAttribute(h)}function ut(n){var i=n[1],t=k(i);t&&l(t)}function ft(n){var i=n[1],t=k(i);t&&d(t)}function et(i){var r=i[1];n.iterateThroughList(Array.prototype.slice.call(t.childNodes),function(n){r&&n.getAttribute("data-svcid")in r?l(n):d(n)})}function ot(){t=_ge("svctrllst");o=_ge("svctrlpckr");a=_ge("svctrllstw");i=_ge("svctrlhvrpnlbtn");i&&n.addClickListener(i,function(){return c()});sj_evt.bind("onCollRegister",rt,!0);sj_evt.bind("onCurrentCollIdSet",ut);sj_evt.bind("onCurrentCollIdUnset",ft);sj_evt.bind("onChangeCollThumbnail",it);sj_evt.bind("onResetScroll",w);sj_evt.bind("onHoverElementSet",et);sj_evt.bind("onBtnToggleCollList",function(){return c(!0)});sj_evt.bind("onControlAppended",function(){return c(!1)});sj_evt.bind("onSaveHover",function(){i||sj_evt.fire(p)})}var t,o,a,i,v=!1,y="ColLst",r="data-svcid",s="data-svkct",h="data-svd",g="&w=40&h=40&c=7&r=0",p="onCollListExpand",nt="onVisualStateChanged";ot()}(SvCtrlV2||(SvCtrlV2={})),function(n){function a(t,i){if(t&&i)return n.urlParamsTemplate.replace(/\{(\d)\}/g,v([t,i]))}function v(n,t){return t===void 0&&(t=!0),function(i,r){if(r){var u=n&&n[r]||"";return t&&u.length&&(u=encodeURIComponent(u)),u}return""}}function y(n){var e=n.ComponentId,o=n.PredefinedType.APIItemType,u=n.MetaLocInfo;if(u){var s=u.MetadataLocationId,h=u.MetadataLocationAttr,c=u.MetaLocCompName;t=s;i=h;r=c;f=a(o,r||e);b()}}function s(){var t=n.getMetadataId(n.metadataFromElement(n.metaLocElement));t&&n.localSavedItemsMap[t]?n.addElementClass(n.metaLocElement,o):n.removeElementClass(n.metaLocElement,o)}function p(){return n.metaLocElement}function h(n){sj_evt.fire("onPersButtonInteract",n.target,p(),i,f,r);sj_evt.fire("onBtnToggleCollList")}function w(r){t&&(n.metaLocElement=_ge(t));n.addInListeners(r,h);n.metaLocElement&&(s(),e=new MutationObserver(s),e.observe(n.metaLocElement,{attributes:!0,attributeFilter:[i]}))}function b(){var t=_qs("."+l,_d.body);t&&(n.persBtn=t,w(n.persBtn))}function c(t){var r=t[0],i=t[2],f=t[4];f&&i===n.getMetadataId(n.metadataFromElement(n.metaLocElement))&&u&&(r==="onSaveAdd"&&n.localSavedItemsMap[i]||r==="onSaveDel"&&!n.localSavedItemsMap[i])&&u()}var l="psvctrl",t,i,r,f,u,e,o="saved";sj_evt.bind("onSaveRegButton",function(n){var t=n[1];u=t});sj_evt.bind("onPartnerRegister",function(n){var t=n[1];y(t)});sj_evt.bind("ajax.unload",function(){n.persBtn&&n.persBtn.removeEventListener("mouseenter",h)});sj_evt.bind("onSaveDel",c);sj_evt.bind("onSaveAdd",c)}(SvCtrlV2||(SvCtrlV2={})),function(n){function t(t){n.fireOverlapping(t);sj_sp(t);n.onSaveControlClicked(n.currentElementMid,n.currentHoveredElement)}function i(){n.ctrlBtn&&n.addClickListener(n.ctrlBtn,t,!0)}i()}(SvCtrlV2||(SvCtrlV2={}))